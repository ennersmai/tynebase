openapi: 3.0.3
info:
  title: TyneBase API
  version: 1.0.0
  description: |
    TyneBase is a multi-tenant knowledge management platform with AI-powered document generation, 
    RAG (Retrieval-Augmented Generation) capabilities, and real-time collaboration features.
    
    ## Authentication
    Most endpoints require JWT authentication via Bearer token in the Authorization header:
    ```
    Authorization: Bearer <access_token>
    ```
    
    ## Multi-Tenancy
    All authenticated endpoints require the `x-tenant-subdomain` header to specify the tenant context:
    ```
    x-tenant-subdomain: acme
    ```
    
    ## Rate Limiting
    - Global: 100 requests per 10 minutes
    - Login: 5 attempts per 15 minutes per IP
    - AI endpoints: 10 requests per minute
    
    ## Error Responses
    All errors follow a consistent format:
    ```json
    {
      "error": {
        "code": "ERROR_CODE",
        "message": "Human-readable error message",
        "details": {}
      }
    }
    ```
  contact:
    name: TyneBase Support
    email: support@tynebase.com
  license:
    name: Proprietary

servers:
  - url: http://localhost:8080
    description: Development server
  - url: https://api.tynebase.com
    description: Production server

tags:
  - name: Health
    description: Health check and system status
  - name: Authentication
    description: User authentication and session management
  - name: Tenants
    description: Tenant management and settings
  - name: Documents
    description: Document CRUD operations and publishing
  - name: Templates
    description: Document template management
  - name: AI
    description: AI-powered document generation and enhancement
  - name: RAG
    description: Retrieval-Augmented Generation and semantic search
  - name: Jobs
    description: Asynchronous job status tracking
  - name: GDPR
    description: User consent and data privacy
  - name: Super Admin
    description: Platform administration (requires super_admin role)

security:
  - BearerAuth: []
  - TenantHeader: []

paths:
  /:
    get:
      summary: API root
      description: Returns basic API information
      tags:
        - Health
      security: []
      responses:
        '200':
          description: API information
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    example: TyneBase API
                  version:
                    type: string
                    example: 1.0.0
                  status:
                    type: string
                    example: running

  /health:
    get:
      summary: Health check
      description: Returns server health status and uptime
      tags:
        - Health
      security: []
      responses:
        '200':
          description: Server is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
                  timestamp:
                    type: string
                    format: date-time
                  uptime:
                    type: number
                    description: Server uptime in seconds
                  environment:
                    type: string
                    example: production

  /api/auth/signup:
    post:
      summary: Create new tenant and admin user
      description: |
        Creates a new tenant organization with an admin user account.
        This endpoint:
        - Creates auth user in Supabase Auth
        - Creates tenant record
        - Creates user profile
        - Creates storage buckets
        - Creates initial credit pool (100 credits for free tier)
      tags:
        - Authentication
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - tenant_name
                - subdomain
              properties:
                email:
                  type: string
                  format: email
                  example: admin@acme.com
                password:
                  type: string
                  format: password
                  minLength: 8
                  example: SecurePass123!
                tenant_name:
                  type: string
                  minLength: 1
                  example: Acme Corporation
                subdomain:
                  type: string
                  minLength: 3
                  maxLength: 63
                  pattern: '^[a-z0-9-]+$'
                  example: acme
                  description: Must be lowercase letters, numbers, and hyphens only
                full_name:
                  type: string
                  example: John Doe
      responses:
        '201':
          description: Account created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
                      tenant:
                        $ref: '#/components/schemas/Tenant'
                  message:
                    type: string
                    example: Account created successfully
        '400':
          $ref: '#/components/responses/ValidationError'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/auth/login:
    post:
      summary: Authenticate user
      description: |
        Authenticates user with email and password.
        Returns JWT access token and refresh token.
        Rate limited to 5 attempts per 15 minutes per IP.
      tags:
        - Authentication
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: admin@acme.com
                password:
                  type: string
                  format: password
                  example: SecurePass123!
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      access_token:
                        type: string
                        description: JWT access token
                      refresh_token:
                        type: string
                        description: JWT refresh token
                      expires_in:
                        type: integer
                        description: Token expiration time in seconds
                      user:
                        $ref: '#/components/schemas/User'
                      tenant:
                        $ref: '#/components/schemas/Tenant'
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                error:
                  code: INVALID_CREDENTIALS
                  message: Invalid email or password
                  details: {}
        '403':
          description: Account suspended
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                error:
                  code: ACCOUNT_SUSPENDED
                  message: Your account has been suspended
                  details: {}

  /api/auth/me:
    get:
      summary: Get current user profile
      description: Returns authenticated user's profile and tenant information
      tags:
        - Authentication
      responses:
        '200':
          description: User profile retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
                      tenant:
                        $ref: '#/components/schemas/Tenant'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/tenants/{id}:
    patch:
      summary: Update tenant settings
      description: |
        Updates tenant name and settings (branding, AI preferences, notifications).
        Requires admin role.
      tags:
        - Tenants
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Tenant UUID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 100
                  example: Acme Corporation
                settings:
                  type: object
                  properties:
                    branding:
                      type: object
                      properties:
                        logo_url:
                          type: string
                          format: uri
                        primary_color:
                          type: string
                          pattern: '^#[0-9A-Fa-f]{6}$'
                          example: '#3B82F6'
                        secondary_color:
                          type: string
                          pattern: '^#[0-9A-Fa-f]{6}$'
                          example: '#10B981'
                        company_name:
                          type: string
                          maxLength: 100
                    ai_preferences:
                      type: object
                      properties:
                        default_provider:
                          type: string
                          enum: [openai, anthropic, cohere]
                        default_model:
                          type: string
                          maxLength: 50
                        temperature:
                          type: number
                          minimum: 0
                          maximum: 2
                    notifications:
                      type: object
                      properties:
                        email_enabled:
                          type: boolean
                        digest_frequency:
                          type: string
                          enum: [daily, weekly, never]
      responses:
        '200':
          description: Tenant updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      tenant:
                        $ref: '#/components/schemas/Tenant'
        '400':
          $ref: '#/components/responses/ValidationError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/documents:
    get:
      summary: List documents
      description: |
        Lists documents with optional filtering and pagination.
        Returns documents belonging to the authenticated user's tenant.
      tags:
        - Documents
      parameters:
        - name: parent_id
          in: query
          schema:
            type: string
            format: uuid
          description: Filter by parent document (for folder structure)
        - name: status
          in: query
          schema:
            type: string
            enum: [draft, published]
          description: Filter by document status
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
          description: Items per page
      responses:
        '200':
          description: Documents retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      documents:
                        type: array
                        items:
                          $ref: '#/components/schemas/Document'
                      pagination:
                        $ref: '#/components/schemas/Pagination'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'

    post:
      summary: Create document
      description: |
        Creates a new document with status='draft'.
        Creates immutable lineage event for audit trail.
      tags:
        - Documents
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
              properties:
                title:
                  type: string
                  minLength: 1
                  maxLength: 500
                  example: Product Requirements Document
                content:
                  type: string
                  description: Markdown content
                  example: '# Overview\n\nThis document describes...'
                parent_id:
                  type: string
                  format: uuid
                  description: Parent document UUID for folder structure
                is_public:
                  type: boolean
                  default: false
                  description: Whether document is publicly accessible
      responses:
        '201':
          description: Document created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      document:
                        $ref: '#/components/schemas/Document'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/documents/{id}:
    get:
      summary: Get document by ID
      description: Retrieves a single document. Document must belong to user's tenant.
      tags:
        - Documents
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Document retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      document:
                        $ref: '#/components/schemas/Document'
        '404':
          $ref: '#/components/responses/NotFound'

    patch:
      summary: Update document
      description: |
        Updates document content, title, or visibility.
        Only the document author can update.
        Automatically dispatches RAG indexing job if content changes.
      tags:
        - Documents
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  minLength: 1
                  maxLength: 500
                content:
                  type: string
                  maxLength: 10485760
                  description: Max 10MB content
                yjs_state:
                  type: string
                  format: byte
                  description: Base64-encoded Y.js binary state for real-time collaboration
                is_public:
                  type: boolean
      responses:
        '200':
          description: Document updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      document:
                        $ref: '#/components/schemas/Document'
        '403':
          description: Only document author can update
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          $ref: '#/components/responses/NotFound'

    delete:
      summary: Delete document
      description: |
        Deletes a document. Only the document author can delete.
        Cascade deletes embeddings and lineage events.
      tags:
        - Documents
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Document deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                      documentId:
                        type: string
                        format: uuid
        '403':
          description: Only document author can delete
        '404':
          $ref: '#/components/responses/NotFound'

  /api/documents/{id}/publish:
    post:
      summary: Publish document
      description: |
        Changes document status from 'draft' to 'published'.
        Requires admin or editor role.
        Sets published_at timestamp and creates lineage event.
      tags:
        - Documents
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Document published successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      document:
                        $ref: '#/components/schemas/Document'
        '400':
          description: Document already published
        '403':
          description: Requires admin or editor role
        '404':
          $ref: '#/components/responses/NotFound'

  /api/templates:
    get:
      summary: List templates
      description: |
        Lists available templates:
        - Approved global templates (tenant_id IS NULL AND is_approved = TRUE)
        - Tenant's own templates (any approval status)
      tags:
        - Templates
      parameters:
        - name: category
          in: query
          schema:
            type: string
          description: Filter by category
        - name: visibility
          in: query
          schema:
            type: string
            enum: [internal, public]
          description: Filter by visibility
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
      responses:
        '200':
          description: Templates retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      templates:
                        type: array
                        items:
                          $ref: '#/components/schemas/Template'
                      pagination:
                        $ref: '#/components/schemas/Pagination'

    post:
      summary: Create template
      description: Creates a new template. Requires admin role.
      tags:
        - Templates
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - content
              properties:
                title:
                  type: string
                  minLength: 1
                  maxLength: 500
                description:
                  type: string
                  maxLength: 2000
                content:
                  type: string
                  minLength: 1
                category:
                  type: string
                  maxLength: 100
                visibility:
                  type: string
                  enum: [internal, public]
                  default: internal
      responses:
        '201':
          description: Template created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      template:
                        $ref: '#/components/schemas/Template'
        '403':
          description: Requires admin role

  /api/templates/{id}/use:
    post:
      summary: Create document from template
      description: |
        Duplicates a template as a new draft document.
        User must have access to the template (global approved OR tenant's own).
      tags:
        - Templates
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '201':
          description: Document created from template
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      document:
                        $ref: '#/components/schemas/Document'
        '403':
          description: No access to template
        '404':
          $ref: '#/components/responses/NotFound'

  /api/ai/generate:
    post:
      summary: Generate document with AI
      description: |
        Generates document content from a prompt using AI.
        Requires user consent for AI processing.
        Deducts credits from tenant's monthly pool.
      tags:
        - AI
      security:
        - BearerAuth: []
        - TenantHeader: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - prompt
              properties:
                prompt:
                  type: string
                  minLength: 10
                  maxLength: 10000
                  example: Write a product requirements document for a mobile app
                model:
                  type: string
                  enum: [deepseek-v3, claude-sonnet-4.5, gemini-3-flash]
                  default: deepseek-v3
                max_tokens:
                  type: integer
                  minimum: 100
                  maximum: 4000
                  default: 2000
      responses:
        '200':
          description: Content generated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      content:
                        type: string
                      model:
                        type: string
                      tokens_used:
                        type: integer
                      credits_charged:
                        type: integer
        '403':
          description: User has not consented to AI processing or insufficient credits
        '429':
          description: Rate limit exceeded

  /api/rag/search:
    post:
      summary: Search documents with RAG
      description: |
        Performs hybrid search (vector similarity + full-text) across document embeddings.
        Optionally applies Cohere reranking for improved relevance.
      tags:
        - RAG
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - query
              properties:
                query:
                  type: string
                  minLength: 1
                  maxLength: 1000
                  example: How do I configure authentication?
                limit:
                  type: integer
                  minimum: 1
                  maximum: 100
                  default: 10
                use_reranking:
                  type: boolean
                  default: true
                  description: Apply Cohere reranking for better relevance
                rerank_top_n:
                  type: integer
                  minimum: 1
                  maximum: 50
                  default: 10
      responses:
        '200':
          description: Search results
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      results:
                        type: array
                        items:
                          type: object
                          properties:
                            chunk_id:
                              type: string
                              format: uuid
                            document_id:
                              type: string
                              format: uuid
                            content:
                              type: string
                            score:
                              type: number
                            metadata:
                              type: object

  /api/ai/chat:
    post:
      summary: Chat with RAG context
      description: |
        Performs RAG-enhanced chat by retrieving relevant document chunks
        and using them as context for AI response generation.
        Supports streaming responses.
      tags:
        - RAG
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - query
              properties:
                query:
                  type: string
                  minLength: 1
                  maxLength: 2000
                  example: What are the authentication requirements?
                max_context_chunks:
                  type: integer
                  minimum: 1
                  maximum: 20
                  default: 10
                model:
                  type: string
                  example: claude-sonnet-4.5
                temperature:
                  type: number
                  minimum: 0
                  maximum: 2
                  default: 0.7
                stream:
                  type: boolean
                  default: true
      responses:
        '200':
          description: Chat response (streaming or complete)
          content:
            text/event-stream:
              schema:
                type: string
                description: Server-Sent Events stream
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      response:
                        type: string
                      sources:
                        type: array
                        items:
                          type: object

  /api/jobs/{id}:
    get:
      summary: Get job status
      description: |
        Retrieves status of an asynchronous job.
        Jobs include: rag_index, video_ingest, document_convert, etc.
      tags:
        - Jobs
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Job status retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      job:
                        $ref: '#/components/schemas/Job'
        '404':
          description: Job not found
        '403':
          description: Job belongs to different tenant

  /api/gdpr/consents:
    get:
      summary: Get user consents
      description: Returns current user's GDPR consent preferences
      tags:
        - GDPR
      responses:
        '200':
          description: Consents retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      consents:
                        $ref: '#/components/schemas/UserConsent'

    patch:
      summary: Update user consents
      description: Updates user's GDPR consent preferences
      tags:
        - GDPR
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                ai_processing:
                  type: boolean
                analytics_tracking:
                  type: boolean
                knowledge_indexing:
                  type: boolean
      responses:
        '200':
          description: Consents updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      consents:
                        $ref: '#/components/schemas/UserConsent'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT access token obtained from /api/auth/login
    TenantHeader:
      type: apiKey
      in: header
      name: x-tenant-subdomain
      description: Tenant subdomain for multi-tenant context

  schemas:
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
        email:
          type: string
          format: email
        full_name:
          type: string
          nullable: true
        role:
          type: string
          enum: [admin, editor, member, viewer]
        is_super_admin:
          type: boolean
        status:
          type: string
          enum: [active, suspended, deleted]
        last_active_at:
          type: string
          format: date-time
          nullable: true

    Tenant:
      type: object
      properties:
        id:
          type: string
          format: uuid
        subdomain:
          type: string
        name:
          type: string
        tier:
          type: string
          enum: [free, pro, enterprise]
        settings:
          type: object
        storage_limit:
          type: integer
          description: Storage limit in bytes
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Document:
      type: object
      properties:
        id:
          type: string
          format: uuid
        title:
          type: string
        content:
          type: string
          nullable: true
        parent_id:
          type: string
          format: uuid
          nullable: true
        is_public:
          type: boolean
        status:
          type: string
          enum: [draft, published]
        author_id:
          type: string
          format: uuid
        published_at:
          type: string
          format: date-time
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        users:
          type: object
          description: Author information (joined)
          properties:
            id:
              type: string
              format: uuid
            email:
              type: string
            full_name:
              type: string

    Template:
      type: object
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
          nullable: true
          description: NULL for global templates
        title:
          type: string
        description:
          type: string
          nullable: true
        content:
          type: string
        category:
          type: string
          nullable: true
        visibility:
          type: string
          enum: [internal, public]
        is_approved:
          type: boolean
          description: Whether template is approved for public marketplace
        created_by:
          type: string
          format: uuid
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Job:
      type: object
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        type:
          type: string
          enum: [rag_index, video_ingest, document_convert, url_scrape, ai_generate]
        status:
          type: string
          enum: [pending, processing, completed, failed]
        result:
          type: object
          nullable: true
        created_at:
          type: string
          format: date-time
        completed_at:
          type: string
          format: date-time
          nullable: true

    UserConsent:
      type: object
      properties:
        user_id:
          type: string
          format: uuid
        ai_processing:
          type: boolean
          description: Consent for AI processing of user data
        analytics_tracking:
          type: boolean
          description: Consent for analytics tracking
        knowledge_indexing:
          type: boolean
          description: Consent for indexing content for RAG
        updated_at:
          type: string
          format: date-time

    Pagination:
      type: object
      properties:
        page:
          type: integer
        limit:
          type: integer
        total:
          type: integer
          description: Total number of items
        totalPages:
          type: integer
        hasNextPage:
          type: boolean
        hasPrevPage:
          type: boolean

    Error:
      type: object
      properties:
        error:
          type: object
          properties:
            code:
              type: string
              example: VALIDATION_ERROR
            message:
              type: string
              example: Invalid input data
            details:
              type: object

  responses:
    ValidationError:
      description: Validation error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error:
              code: VALIDATION_ERROR
              message: Invalid input data
              details:
                - field: email
                  message: Invalid email format

    Unauthorized:
      description: Unauthorized - missing or invalid token
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error:
              code: UNAUTHORIZED
              message: Missing or invalid authorization header
              details: {}

    Forbidden:
      description: Forbidden - insufficient permissions
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error:
              code: FORBIDDEN
              message: You do not have permission to perform this action
              details: {}

    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error:
              code: NOT_FOUND
              message: The requested resource was not found
              details: {}

    InternalError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error:
              code: INTERNAL_ERROR
              message: An unexpected error occurred
              details: {}
