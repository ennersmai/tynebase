{
  "project": "TyneBase Backend",
  "milestone": 2,
  "version": "1.0",
  "tasks": [
    {
      "id": "1.1",
      "phase": "Phase 1: Foundation (Database & Auth)",
      "title": "[DB] Initialize Supabase Project",
      "action": "Create Supabase project in eu-west-2 region",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T08:37:47.820036",
      "completed_at": "2026-01-25T08:38:03.373318"
    },
    {
      "id": "1.2",
      "phase": "Phase 1: Foundation (Database & Auth)",
      "title": "[DB] Create Core Identity Tables",
      "action": "Create migration 001_identity.sql with tenants & users tables per PRD schema",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T08:38:13.868508",
      "completed_at": "2026-01-25T08:40:01.287224"
    },
    {
      "id": "1.3",
      "phase": "Phase 1: Foundation (Database & Auth)",
      "title": "[DB] Enable Row Level Security on Identity Tables",
      "action": "Add RLS policies for tenants and users tables",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T08:48:46.248980",
      "completed_at": "2026-01-25T08:52:22.369147"
    },
    {
      "id": "1.4",
      "phase": "Phase 1: Foundation (Database & Auth)",
      "title": "[DB] Create Knowledge Base Tables",
      "action": "Create migration 002_documents.sql with documents & templates tables",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T08:53:50.761636",
      "completed_at": "2026-01-25T09:06:56.332363"
    },
    {
      "id": "1.5",
      "phase": "Phase 1: Foundation (Database & Auth)",
      "title": "[DB] Enable pgvector Extension",
      "action": "Execute CREATE EXTENSION IF NOT EXISTS vector;",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T09:07:54.176321",
      "completed_at": "2026-01-25T09:12:42.473679"
    },
    {
      "id": "1.6",
      "phase": "Phase 1: Foundation (Database & Auth)",
      "title": "[DB] Create Embeddings Table with Indexes",
      "action": "Create migration 003_embeddings.sql with document_embeddings table",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T09:13:44.254023",
      "completed_at": "2026-01-25T09:17:49.235947"
    },
    {
      "id": "1.7",
      "phase": "Phase 1: Foundation (Database & Auth)",
      "title": "[DB] Create Job Queue Infrastructure",
      "action": "Create migration 004_jobs.sql with job_queue table and status enum",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T09:22:37.181610",
      "completed_at": "2026-01-25T09:25:41.300407"
    },
    {
      "id": "1.8",
      "phase": "Phase 1: Foundation (Database & Auth)",
      "title": "[DB] Create Document Lineage Table",
      "action": "Create migration 005_lineage.sql with immutable audit trail",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T09:29:30.121500",
      "completed_at": "2026-01-25T09:32:12.639480"
    },
    {
      "id": "1.9",
      "phase": "Phase 1: Foundation (Database & Auth)",
      "title": "[DB] Create User Consents Table",
      "action": "Create migration 006_consents.sql",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T09:34:06.715984",
      "completed_at": "2026-01-25T09:35:51.182436"
    },
    {
      "id": "1.10",
      "phase": "Phase 1: Foundation (Database & Auth)",
      "title": "[DB] Create Credit Tracking Tables",
      "action": "Create migration 007_credits.sql with credit_pools and query_usage",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T09:39:55.797266",
      "completed_at": "2026-01-25T09:42:55.190142"
    },
    {
      "id": "1.11",
      "phase": "Phase 1: Foundation (Database & Auth)",
      "title": "[DB] Create Storage Buckets with RLS",
      "action": "Create buckets in Supabase: tenant-uploads, tenant-documents",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T09:44:27.756488",
      "completed_at": "2026-01-25T09:47:06.473632"
    },
    {
      "id": "1.12",
      "phase": "Phase 1: Foundation (Database & Auth)",
      "title": "[DB] Create Hybrid Search RPC Function",
      "action": "Create SQL function hybrid_search combining vector + full-text search",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T09:48:12.298526",
      "completed_at": "2026-01-25T09:51:25.304463"
    },
    {
      "id": "2.1",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Initialize Fastify Project",
      "action": "Create backend folder, npm init, install core dependencies",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T09:53:24.861697",
      "completed_at": "2026-01-25T09:57:28.700584"
    },
    {
      "id": "2.2",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Setup Environment Configuration",
      "action": "Create .env.example with all required vars",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T09:59:28.250907",
      "completed_at": "2026-01-25T10:02:57.052756"
    },
    {
      "id": "2.3",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Create Subdomain Resolution Middleware",
      "action": "Create middleware/tenantContext.ts to extract x-tenant-subdomain header",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T10:03:53.959295",
      "completed_at": "2026-01-25T10:07:48.112957"
    },
    {
      "id": "2.4",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Create JWT Authentication Middleware",
      "action": "Create middleware/auth.ts to verify Supabase JWT",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T10:17:02.858351",
      "completed_at": "2026-01-25T10:20:31.091108"
    },
    {
      "id": "2.5",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Create Tenant Membership Guard",
      "action": "Create middleware/membershipGuard.ts to verify user belongs to tenant",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T10:26:34.306430",
      "completed_at": "2026-01-25T10:29:40.199664"
    },
    {
      "id": "2.6",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Implement In-Memory Rate Limiting",
      "action": "Create middleware/rateLimit.ts using Map with sliding window",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T10:31:28.966969",
      "completed_at": "2026-01-25T10:35:40.267632"
    },
    {
      "id": "2.7",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Create Credit Guard Middleware",
      "action": "Create middleware/creditGuard.ts for AI endpoints",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T10:37:34.702574",
      "completed_at": "2026-01-25T10:39:30.490026"
    },
    {
      "id": "2.8",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Implement Signup Endpoint",
      "action": "POST /api/auth/signup with transaction (tenant, bucket, admin user)",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T10:42:58.490126",
      "completed_at": "2026-01-25T10:51:29.769753"
    },
    {
      "id": "2.9",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Implement Login Endpoint",
      "action": "POST /api/auth/login returning JWT",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T10:53:32.313594",
      "completed_at": "2026-01-25T10:57:14.442511"
    },
    {
      "id": "2.10",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Implement Session Info Endpoint",
      "action": "GET /api/auth/me returning user + tenant",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T10:59:51.409677",
      "completed_at": "2026-01-25T11:04:25.073484"
    },
    {
      "id": "2.11",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Implement Tenant Settings Update Endpoint",
      "action": "PATCH /api/tenants/:id for updating settings",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T11:13:33.808405",
      "completed_at": "2026-01-25T11:17:31.487035"
    },
    {
      "id": "2.12",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Implement Document List Endpoint",
      "action": "GET /api/documents with filtering",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T11:20:14.326498",
      "completed_at": "2026-01-25T11:24:47.347248"
    },
    {
      "id": "2.13",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Implement Document Get Endpoint",
      "action": "GET /api/documents/:id",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T11:26:25.916187",
      "completed_at": "2026-01-25T11:29:09.296170"
    },
    {
      "id": "2.14",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Implement Document Create Endpoint",
      "action": "POST /api/documents creating draft",
      "passes": true,
      "in_progress": false,
      "started_at": "2026-01-25T11:30:06.249887",
      "completed_at": "2026-01-25T11:33:36.602839"
    },
    {
      "id": "2.15",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Implement Document Update Endpoint",
      "action": "PATCH /api/documents/:id for content and yjs_state",
      "passes": false
    },
    {
      "id": "2.16",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Implement Document Delete Endpoint",
      "action": "DELETE /api/documents/:id",
      "passes": false
    },
    {
      "id": "2.17",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Implement Document Publish Endpoint",
      "action": "POST /api/documents/:id/publish",
      "passes": false
    },
    {
      "id": "2.18",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Implement Template List Endpoint",
      "action": "GET /api/templates (global + tenant templates)",
      "passes": false
    },
    {
      "id": "2.19",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Implement Template Create Endpoint",
      "action": "POST /api/templates (admin only)",
      "passes": false
    },
    {
      "id": "2.20",
      "phase": "Phase 2: API Foundation (Fastify)",
      "title": "[API] Implement Template Use Endpoint",
      "action": "POST /api/templates/:id/use to duplicate as new document",
      "passes": false
    },
    {
      "id": "3.1",
      "phase": "Phase 3: Job Queue & Worker Infrastructure",
      "title": "[Worker] Create Worker Entry Point",
      "action": "Create backend/worker.ts with job polling loop",
      "passes": false
    },
    {
      "id": "3.2",
      "phase": "Phase 3: Job Queue & Worker Infrastructure",
      "title": "[Worker] Implement Job Claim Function",
      "action": "Create utils/claimJob.ts with SKIP LOCKED logic",
      "passes": false
    },
    {
      "id": "3.3",
      "phase": "Phase 3: Job Queue & Worker Infrastructure",
      "title": "[Worker] Implement Job Dispatcher",
      "action": "Create utils/dispatchJob.ts helper",
      "passes": false
    },
    {
      "id": "3.4",
      "phase": "Phase 3: Job Queue & Worker Infrastructure",
      "title": "[Worker] Implement Job Completion Handlers",
      "action": "Create utils/completeJob.ts and utils/failJob.ts",
      "passes": false
    },
    {
      "id": "3.5",
      "phase": "Phase 3: Job Queue & Worker Infrastructure",
      "title": "[Infra] Create Fly.io Configuration",
      "action": "Create fly.toml with processes: api and worker",
      "passes": false
    },
    {
      "id": "3.6",
      "phase": "Phase 3: Job Queue & Worker Infrastructure",
      "title": "[Infra] Create Multi-Stage Dockerfile",
      "action": "Create Dockerfile with build and runtime stages",
      "passes": false
    },
    {
      "id": "4.1",
      "phase": "Phase 4: AI Provider Integration",
      "title": "[AI] Create AI Provider Router",
      "action": "Create services/ai/router.ts routing based on tenant settings",
      "passes": false
    },
    {
      "id": "4.2",
      "phase": "Phase 4: AI Provider Integration",
      "title": "[AI] Install Token Counter",
      "action": "Install tiktoken, create utils/tokenCounter.ts",
      "passes": false
    },
    {
      "id": "4.3",
      "phase": "Phase 4: AI Provider Integration",
      "title": "[AI] Implement Credit Calculator",
      "action": "Create utils/creditCalculator.ts with pricing logic from PRD",
      "passes": false
    },
    {
      "id": "4.4",
      "phase": "Phase 4: AI Provider Integration",
      "title": "[AI] Implement OpenAI Integration",
      "action": "Create services/ai/openai.ts using api.eu.openai.com",
      "passes": false
    },
    {
      "id": "4.5",
      "phase": "Phase 4: AI Provider Integration",
      "title": "[AI] Implement Anthropic Bedrock Integration",
      "action": "Create services/ai/anthropic.ts via AWS Bedrock (eu-west-2)",
      "passes": false
    },
    {
      "id": "4.6",
      "phase": "Phase 4: AI Provider Integration",
      "title": "[AI] Implement Vertex AI Integration",
      "action": "Create services/ai/vertex.ts for gemini-3-flash (europe-west2)",
      "passes": false
    },
    {
      "id": "5.1",
      "phase": "Phase 5: AI Features - Generation & Enhancement",
      "title": "[API] Implement AI Generate Endpoint",
      "action": "POST /api/ai/generate with credit check + job dispatch",
      "passes": false
    },
    {
      "id": "5.2",
      "phase": "Phase 5: AI Features - Generation & Enhancement",
      "title": "[Worker] Implement AI Generation Job Handler",
      "action": "Create workers/aiGeneration.ts",
      "passes": false
    },
    {
      "id": "5.3",
      "phase": "Phase 5: AI Features - Generation & Enhancement",
      "title": "[API] Implement Job Status Polling Endpoint",
      "action": "GET /api/jobs/:id",
      "passes": false
    },
    {
      "id": "5.4",
      "phase": "Phase 5: AI Features - Generation & Enhancement",
      "title": "[API] Implement Document Enhance Endpoint",
      "action": "POST /api/ai/enhance with <10s timeout",
      "passes": false
    },
    {
      "id": "5.5",
      "phase": "Phase 5: AI Features - Generation & Enhancement",
      "title": "[API] Implement Apply Suggestion Endpoint",
      "action": "POST /api/ai/enhance/:suggestionId/apply",
      "passes": false
    },
    {
      "id": "6.1",
      "phase": "Phase 6: Video & Document Ingestion",
      "title": "[API] Implement Video Upload Endpoint",
      "action": "POST /api/ai/video/upload with multipart form",
      "passes": false
    },
    {
      "id": "6.2",
      "phase": "Phase 6: Video & Document Ingestion",
      "title": "[Worker] Implement Gemini Video Ingestion Handler",
      "action": "Create workers/videoIngest.ts with Gemini API integration",
      "passes": false
    },
    {
      "id": "6.3",
      "phase": "Phase 6: Video & Document Ingestion",
      "title": "[Worker] Implement Fallback yt-dlp + Whisper Handler",
      "action": "Add fallback logic to workers/videoIngest.ts",
      "passes": false
    },
    {
      "id": "6.4",
      "phase": "Phase 6: Video & Document Ingestion",
      "title": "[API] Implement YouTube URL Endpoint",
      "action": "POST /api/ai/video/youtube",
      "passes": false
    },
    {
      "id": "6.5",
      "phase": "Phase 6: Video & Document Ingestion",
      "title": "[Worker] Handle YouTube URLs in Video Ingest",
      "action": "Update workers/videoIngest.ts to handle YouTube URLs",
      "passes": false
    },
    {
      "id": "6.6",
      "phase": "Phase 6: Video & Document Ingestion",
      "title": "[API] Implement Document Import Endpoint",
      "action": "POST /api/documents/import for PDF/DOCX/MD",
      "passes": false
    },
    {
      "id": "6.7",
      "phase": "Phase 6: Video & Document Ingestion",
      "title": "[Worker] Implement PDF Conversion Handler",
      "action": "Create workers/documentConvert.ts with pdf-parse",
      "passes": false
    },
    {
      "id": "6.8",
      "phase": "Phase 6: Video & Document Ingestion",
      "title": "[Worker] Implement DOCX Conversion Handler",
      "action": "Add mammoth to workers/documentConvert.ts",
      "passes": false
    },
    {
      "id": "6.9",
      "phase": "Phase 6: Video & Document Ingestion",
      "title": "[API] Implement URL Scraping Endpoint",
      "action": "POST /api/ai/scrape using Tavily API",
      "passes": false
    },
    {
      "id": "6.10",
      "phase": "Phase 6: Video & Document Ingestion",
      "title": "[API] Create Integration Import Stubs",
      "action": "Create POST /api/integrations/{notion,confluence,gdocs}/import endpoints returning 501",
      "passes": false
    },
    {
      "id": "7.1",
      "phase": "Phase 7: RAG Pipeline",
      "title": "[Worker] Implement 4-Pass Chunking Algorithm",
      "action": "Create services/chunking/fourPass.ts with hierarchical logic",
      "passes": false
    },
    {
      "id": "7.2",
      "phase": "Phase 7: RAG Pipeline",
      "title": "[Worker] Implement RAG Index Job Handler",
      "action": "Create workers/ragIndex.ts calling chunking + OpenAI embeddings",
      "passes": false
    },
    {
      "id": "7.3",
      "phase": "Phase 7: RAG Pipeline",
      "title": "[API] Auto-Index on Document Save",
      "action": "Update PATCH /api/documents/:id to dispatch rag_index job",
      "passes": false
    },
    {
      "id": "7.4",
      "phase": "Phase 7: RAG Pipeline",
      "title": "[API] Implement RAG Chat Endpoint",
      "action": "POST /api/ai/chat with full RAG pipeline",
      "passes": false
    },
    {
      "id": "7.5",
      "phase": "Phase 7: RAG Pipeline",
      "title": "[API] Implement Reranking with Fallback",
      "action": "Add AWS Bedrock Cohere Rerank with fallback to vector-only",
      "passes": false
    },
    {
      "id": "7.6",
      "phase": "Phase 7: RAG Pipeline",
      "title": "[API] Implement Query Workspace Endpoint",
      "action": "GET /api/documents/:id/normalized",
      "passes": false
    },
    {
      "id": "7.7",
      "phase": "Phase 7: RAG Pipeline",
      "title": "[API] Implement Index Health Endpoint",
      "action": "GET /api/sources/health",
      "passes": false
    },
    {
      "id": "7.8",
      "phase": "Phase 7: RAG Pipeline",
      "title": "[API] Implement Manual Re-Index Endpoint",
      "action": "POST /api/sources/:id/reindex",
      "passes": false
    },
    {
      "id": "8.1",
      "phase": "Phase 8: Real-Time Collaboration (Hocuspocus)",
      "title": "[Collab] Create Separate Fly.io App",
      "action": "Create new Fly.io app tynebase-collab in lhr region",
      "passes": false
    },
    {
      "id": "8.2",
      "phase": "Phase 8: Real-Time Collaboration (Hocuspocus)",
      "title": "[Collab] Initialize Hocuspocus Server",
      "action": "Create collab-server.ts with @hocuspocus/server",
      "passes": false
    },
    {
      "id": "8.3",
      "phase": "Phase 8: Real-Time Collaboration (Hocuspocus)",
      "title": "[Collab] Implement Authentication Hook",
      "action": "Add onAuthenticate hook verifying JWT + document access",
      "passes": false
    },
    {
      "id": "8.4",
      "phase": "Phase 8: Real-Time Collaboration (Hocuspocus)",
      "title": "[Collab] Implement Load Document Hook",
      "action": "Add onLoadDocument hook fetching yjs_state from DB",
      "passes": false
    },
    {
      "id": "8.5",
      "phase": "Phase 8: Real-Time Collaboration (Hocuspocus)",
      "title": "[Collab] Implement Store Document Hook",
      "action": "Add onStoreDocument with 2s debounce",
      "passes": false
    },
    {
      "id": "8.6",
      "phase": "Phase 8: Real-Time Collaboration (Hocuspocus)",
      "title": "[Collab] Trigger Re-Index on Significant Changes",
      "action": "Dispatch rag_index job if content length changed >10%",
      "passes": false
    },
    {
      "id": "9.1",
      "phase": "Phase 9: Super Admin Dashboard",
      "title": "[API] Create Super Admin Guard Middleware",
      "action": "Create middleware/superAdminGuard.ts",
      "passes": false
    },
    {
      "id": "9.2",
      "phase": "Phase 9: Super Admin Dashboard",
      "title": "[API] Implement Platform Overview Endpoint",
      "action": "GET /api/superadmin/overview with aggregate stats",
      "passes": false
    },
    {
      "id": "9.3",
      "phase": "Phase 9: Super Admin Dashboard",
      "title": "[API] Implement Tenant List Endpoint",
      "action": "GET /api/superadmin/tenants with pagination",
      "passes": false
    },
    {
      "id": "9.4",
      "phase": "Phase 9: Super Admin Dashboard",
      "title": "[API] Implement Impersonation Endpoint",
      "action": "POST /api/superadmin/impersonate/:tenantId",
      "passes": false
    },
    {
      "id": "9.5",
      "phase": "Phase 9: Super Admin Dashboard",
      "title": "[API] Implement Tenant Suspend Endpoint",
      "action": "POST /api/superadmin/tenants/:id/suspend",
      "passes": false
    },
    {
      "id": "9.6",
      "phase": "Phase 9: Super Admin Dashboard",
      "title": "[API] Implement Change Tier Endpoint",
      "action": "PATCH /api/superadmin/tenants/:id/tier",
      "passes": false
    },
    {
      "id": "10.1",
      "phase": "Phase 10: GDPR & Compliance",
      "title": "[API] Implement Data Export Endpoint",
      "action": "GET /api/gdpr/export generating JSON export",
      "passes": false
    },
    {
      "id": "10.2",
      "phase": "Phase 10: GDPR & Compliance",
      "title": "[API] Implement Account Deletion Endpoint",
      "action": "DELETE /api/gdpr/delete-account dispatching deletion job",
      "passes": false
    },
    {
      "id": "10.3",
      "phase": "Phase 10: GDPR & Compliance",
      "title": "[Worker] Implement GDPR Deletion Job Handler",
      "action": "Create workers/gdprDelete.ts anonymizing user data",
      "passes": false
    },
    {
      "id": "10.4",
      "phase": "Phase 10: GDPR & Compliance",
      "title": "[API] Implement Consent Update Endpoint",
      "action": "PATCH /api/user/consents",
      "passes": false
    },
    {
      "id": "11.1",
      "phase": "Phase 11: Image/Video Embeds in Documents",
      "title": "[API] Implement Asset Upload Endpoint",
      "action": "POST /api/documents/:id/upload for images/videos",
      "passes": false
    },
    {
      "id": "11.2",
      "phase": "Phase 11: Image/Video Embeds in Documents",
      "title": "[API] Implement Asset List Endpoint",
      "action": "GET /api/documents/:id/assets",
      "passes": false
    },
    {
      "id": "11.3",
      "phase": "Phase 11: Image/Video Embeds in Documents",
      "title": "[API] Implement Asset Delete Endpoint",
      "action": "DELETE /api/documents/:id/assets/:assetId",
      "passes": false
    },
    {
      "id": "12.1",
      "phase": "Phase 12: Logging & Monitoring",
      "title": "[Infra] Setup Axiom Integration",
      "action": "Install axiom transport, configure pino",
      "passes": false
    },
    {
      "id": "12.2",
      "phase": "Phase 12: Logging & Monitoring",
      "title": "[API] Add Request Logging Middleware",
      "action": "Log all requests with user/tenant context",
      "passes": false
    },
    {
      "id": "12.3",
      "phase": "Phase 12: Logging & Monitoring",
      "title": "[Worker] Add Job Performance Logging",
      "action": "Log job start, completion, duration",
      "passes": false
    },
    {
      "id": "12.4",
      "phase": "Phase 12: Logging & Monitoring",
      "title": "[API] Add Error Logging with Context",
      "action": "Create error handler logging stack traces + context",
      "passes": false
    },
    {
      "id": "13.1",
      "phase": "Phase 13: Final Integration & Testing",
      "title": "[E2E] Test Complete Signup \u2192 Generation Flow",
      "action": "Script: signup \u2192 login \u2192 create document \u2192 AI generate",
      "passes": false
    },
    {
      "id": "13.2",
      "phase": "Phase 13: Final Integration & Testing",
      "title": "[E2E] Test Video Ingestion Flow",
      "action": "Upload video \u2192 verify transcript \u2192 check credits",
      "passes": false
    },
    {
      "id": "13.3",
      "phase": "Phase 13: Final Integration & Testing",
      "title": "[E2E] Test RAG Chat Flow",
      "action": "Index documents \u2192 ask questions \u2192 verify citations",
      "passes": false
    },
    {
      "id": "13.4",
      "phase": "Phase 13: Final Integration & Testing",
      "title": "[E2E] Test Real-Time Collaboration",
      "action": "Connect 2 clients, type simultaneously, verify persistence",
      "passes": false
    },
    {
      "id": "13.5",
      "phase": "Phase 13: Final Integration & Testing",
      "title": "[E2E] Test Super Admin Functions",
      "action": "Impersonate tenant \u2192 suspend tenant \u2192 verify blocked",
      "passes": false
    },
    {
      "id": "13.6",
      "phase": "Phase 13: Final Integration & Testing",
      "title": "[Audit] Performance Baseline",
      "action": "Benchmark key endpoints (P95 latency targets)",
      "passes": false
    },
    {
      "id": "13.7",
      "phase": "Phase 13: Final Integration & Testing",
      "title": "[Audit] Security Review",
      "action": "Review endpoints for injection, bypass, RLS gaps",
      "passes": false
    },
    {
      "id": "13.8",
      "phase": "Phase 13: Final Integration & Testing",
      "title": "[Audit] Database Performance Review",
      "action": "Check slow queries, missing indexes",
      "passes": false
    },
    {
      "id": "13.9",
      "phase": "Phase 13: Final Integration & Testing",
      "title": "[Docs] Create API Documentation",
      "action": "Generate OpenAPI spec",
      "passes": false
    },
    {
      "id": "13.10",
      "phase": "Phase 13: Final Integration & Testing",
      "title": "[Docs] Create Deployment Guide",
      "action": "Document Fly.io deployment and secrets management",
      "passes": false
    },
    {
      "id": "13.11",
      "phase": "Phase 13: Final Integration & Testing",
      "title": "[Docs] Create Runbook",
      "action": "Document common issues and rollback procedures",
      "passes": false
    },
    {
      "id": "14.1",
      "phase": "Phase 14: Deferred Product-Surface Features",
      "title": "[API] Implement Commenting & Discussion Threads",
      "action": "Deferred - Post Milestone 2",
      "passes": false
    },
    {
      "id": "14.2",
      "phase": "Phase 14: Deferred Product-Surface Features",
      "title": "[System] Emit Mention Events",
      "action": "Deferred - Post Milestone 2",
      "passes": false
    },
    {
      "id": "14.3",
      "phase": "Phase 14: Deferred Product-Surface Features",
      "title": "[Worker] Implement Notification Delivery System",
      "action": "Deferred - Post Milestone 2",
      "passes": false
    },
    {
      "id": "14.4",
      "phase": "Phase 14: Deferred Product-Surface Features",
      "title": "[API] Implement Global / Cross-Entity Search",
      "action": "Deferred - Post Milestone 2",
      "passes": false
    },
    {
      "id": "14.5",
      "phase": "Phase 14: Deferred Product-Surface Features",
      "title": "[API] Implement User Invitations & Onboarding",
      "action": "Deferred - Post Milestone 2",
      "passes": false
    },
    {
      "id": "14.6",
      "phase": "Phase 14: Deferred Product-Surface Features",
      "title": "[Workflow] Implement Approval & Publishing States",
      "action": "Deferred - Post Milestone 2",
      "passes": false
    },
    {
      "id": "14.7",
      "phase": "Phase 14: Deferred Product-Surface Features",
      "title": "[Analytics] Implement Content Usage & Health Metrics",
      "action": "Deferred - Post Milestone 2",
      "passes": false
    },
    {
      "id": "14.8",
      "phase": "Phase 14: Deferred Product-Surface Features",
      "title": "[API/UX] Implement Document Diffing & Restore",
      "action": "Deferred - Post Milestone 2",
      "passes": false
    },
    {
      "id": "AC.1",
      "phase": "Acceptance Criteria",
      "title": "Fly.io API server responding at api.tynebase.com with SSL",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.2",
      "phase": "Acceptance Criteria",
      "title": "Users can signup, login, create tenants",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.3",
      "phase": "Acceptance Criteria",
      "title": "Documents CRUD functional with RLS enforced",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.4",
      "phase": "Acceptance Criteria",
      "title": "TipTap real-time collaboration works (Hocuspocus)",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.5",
      "phase": "Acceptance Criteria",
      "title": "AI generation from prompts creates documents (async)",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.6",
      "phase": "Acceptance Criteria",
      "title": "Video ingestion (YouTube + upload) produces transcripts",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.7",
      "phase": "Acceptance Criteria",
      "title": "PDF/DOCX uploads convert to markdown",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.8",
      "phase": "Acceptance Criteria",
      "title": "URL scraping returns markdown",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.9",
      "phase": "Acceptance Criteria",
      "title": "RAG chat retrieves relevant context with reranking",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.10",
      "phase": "Acceptance Criteria",
      "title": "Enhance provides completion scores + suggestions",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.11",
      "phase": "Acceptance Criteria",
      "title": "Templates can be created, used, edited before saving",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.12",
      "phase": "Acceptance Criteria",
      "title": "Credits deduct per action, overdraft blocked",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.13",
      "phase": "Acceptance Criteria",
      "title": "Document lineage tracks all events",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.14",
      "phase": "Acceptance Criteria",
      "title": "Super admin dashboard functional",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.15",
      "phase": "Acceptance Criteria",
      "title": "GDPR export and deletion work",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.16",
      "phase": "Acceptance Criteria",
      "title": "All logs streaming to Axiom",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.17",
      "phase": "Acceptance Criteria",
      "title": "Job queue processing all task types",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.18",
      "phase": "Acceptance Criteria",
      "title": "No security vulnerabilities (audit passed)",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.19",
      "phase": "Acceptance Criteria",
      "title": "Performance benchmarks met",
      "action": "Validation check",
      "passes": false
    },
    {
      "id": "AC.20",
      "phase": "Acceptance Criteria",
      "title": "Documentation complete",
      "action": "Validation check",
      "passes": false
    }
  ]
}